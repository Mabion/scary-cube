import{Base}from"../polymer/polymer-legacy.js";import"./prism-import.js";import{Polymer}from"../polymer/lib/legacy/polymer-fn.js";var HIGHLIGHT_EVENT="syntax-highlight";Polymer({is:"prism-highlighter",properties:{languages:{type:Object,value:function value(){return{}}}},ready:function ready(){this._handler=this._highlight.bind(this)},attached:function attached(){(this.parentNode.host||this.parentElement).addEventListener(HIGHLIGHT_EVENT,this._handler)},detached:function detached(){(this.parentNode.host||this.parentElement).removeEventListener(HIGHLIGHT_EVENT,this._handler)},_highlight:function _highlight(event){if(!event.detail||!event.detail.code){Base._warn("Malformed",HIGHLIGHT_EVENT,"event:",event.detail);return}event.stopPropagation();var detail=event.detail;detail.code=Prism.highlight(detail.code,this._detectLang(detail.code,detail.lang))},_detectLang:function _detectLang(code,lang){if(!lang){return code.match(/^\s*</)?Prism.languages.markup:Prism.languages.javascript}if(this.languages[lang]){return this.languages[lang]}else if(Prism.languages[lang]){return Prism.languages[lang]}switch(lang.substr(0,2)){case"js":case"es":return Prism.languages.javascript;case"c":return Prism.languages.clike;default:return Prism.languages.markup;}}});